<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>04.ノードの接続</title>
    <style type="text/css">
    body { font-family: Arial; }
    </style>
  </head>
  <body>
    <h1>Vibrato Test</h1>
    <h3>04.ノードの接続</h3>
    <img src="images/vibrato.png"/><br/>
    <table>
      <tr><td>LFO Freq : </td><td><input type="text" size="10" id="lfofreq" value="5"/></td></tr>
      <tr><td>Depth    : </td><td><input type="text" size="10" id="depth" value="10"/></td></tr>
      <tr><td>VCO Freq : </td><td><input type="text" size="10" id="vcofreq" value="440"/></td></tr>
    </table>
    <br/>
    <button onclick="Setup()">Set</button><br/>
    <script type="text/javascript">
    window.AudioContext = window.AudioContext || window.webkitAudioContext;
    var audioctx = new AudioContext();
    
    var play = 0;
    var vco = audioctx.createOscillator();
    var lfo = audioctx.createOscillator();
    
    var depth = audioctx.createGain();
    
    // #1 vco(oscillator node) を AudioContext に接続

    // #2 lfo(oscillator node) を depth(gain node) に接続

    // #3 depth(gain node) を vco(oscillator node) の周波数に接続

    
    function Setup() {
        if(play == 0) {
            play = 1;
            // #4 vco(oscillator node) を start

            // #5 lfo(oscillator node) を start

        }
        vco.frequency.value = parseFloat(document.getElementById("vcofreq").value);
        lfo.frequency.value = parseFloat(document.getElementById("lfofreq").value);
        depth.gain.value = parseFloat(document.getElementById("depth").value);
        
    }
    </script>
    
  </body>
</html>